{"version":3,"sources":["components/cards/SingleProductInfo.js","components/modal/RatingModal.js","components/cards/SingleProduct.js","pages/Product.js","components/cards/AllProductCard.js","functions/ratings.js"],"names":["SingleProductInfo","_ref","product","category","subs","price","shipping","brand","color","sold","quantity","react_default","a","createElement","Fragment","className","react_router_dom","to","concat","slug","name","map","s","key","_id","RatingModal","children","user","useSelector","state","Object","objectSpread","_useState","useState","_useState2","slicedToArray","modalVisible","setModalVisible","navigate","useNavigate","onClick","token","StarOutlined","modal","title","visible","centered","onOk","toast","success","onCancel","TabPane","Tabs","SingleProduct","onStarClick","star","description","images","tooltip","setTooltip","dispatch","useDispatch","length","js","autoPlay","infiniteLoop","showArrows","i","src","url","public_id","alt","laptop","tabs","type","tab","ratings","showAverage","card","actions","e","preventDefault","addToWishlist","then","res","console","log","data","HeartOutlined","es_tooltip","cart","window","localStorage","getItem","JSON","parse","push","count","unique","_","uniqWith","isEqual","setItem","stringify","payload","disabled","ShoppingCartOutlined","modal_RatingModal","build_default","numberOfStars","rating","starRatedColor","changeRating","isSelectable","cards_SingleProductInfo","Product","setProduct","_useState3","_useState4","setStar","_useState5","_useState6","related","setRelated","useParams","useEffect","loadSingleProduct","existingRatingObject","find","ele","postedBy","toString","getProduct","getRelatedProduct","cards_SingleProduct","newRating","productStar","class","r","AllProductCard","Meta","Card","C_Users_dharv_OneDrive_Desktop_mernconnection_EcommProject_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2___default","antd__WEBPACK_IMPORTED_MODULE_6__","hoverable","cover","style","height","objectFit","react_router_dom__WEBPACK_IMPORTED_MODULE_10__","_ant_design_icons__WEBPACK_IMPORTED_MODULE_8__","antd__WEBPACK_IMPORTED_MODULE_7__","C_Users_dharv_OneDrive_Desktop_mernconnection_EcommProject_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","href","_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__","substring","__webpack_require__","d","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_star_ratings__WEBPACK_IMPORTED_MODULE_1__","react_star_ratings__WEBPACK_IMPORTED_MODULE_1___default","p","ratingsArray","total","result","reduce","starDimension","starSpacing","editing"],"mappings":"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","file":"static/js/10.a1676982.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction SingleProductInfo({ product }) {\r\n  const {\r\n    category,\r\n    subs,\r\n    price,\r\n    shipping,\r\n    brand,\r\n    color,\r\n    sold,\r\n    quantity,\r\n  } = product;\r\n\r\n  return (\r\n    <>\r\n      <ul className=\"list-group\">\r\n        <li className=\"list-group-item \">\r\n          Price\r\n          <span className=\"float-sm-right\">${price}</span>\r\n        </li>\r\n\r\n        {category && (\r\n          <li className=\"list-group-item \">\r\n            <span>Category</span>\r\n\r\n            <Link to={`/category/${category.slug}`} className=\"float-sm-right\">\r\n              {category.name}\r\n            </Link>\r\n          </li>\r\n        )}\r\n\r\n        {subs && (\r\n          <li className=\"list-group-item \">\r\n            Sub Category\r\n            {subs.map((s) => (\r\n              <Link\r\n                key={s._id}\r\n                to={`/sub/${s.slug}`}\r\n                className=\"float-sm-right\"\r\n              >\r\n                {s.name} ||\r\n              </Link>\r\n            ))}\r\n          </li>\r\n        )}\r\n\r\n        <li className=\"list-group-item\">\r\n          Shipping\r\n          <span className=\"float-sm-right\">{shipping}</span>\r\n        </li>\r\n\r\n        <li className=\"list-group-item \">\r\n          Color\r\n          <span className=\"float-sm-right \">{color}</span>\r\n        </li>\r\n\r\n        <li className=\"list-group-item\">\r\n          Brand\r\n          <span className=\" float-sm-right\">{brand}</span>\r\n        </li>\r\n\r\n        <li className=\"list-group-item\">\r\n          Available\r\n          <span className=\"float-sm-right\">{quantity}</span>\r\n        </li>\r\n\r\n        <li className=\"list-group-item\">\r\n          Sold\r\n          <span className=\"float-sm-right\">{sold}</span>\r\n        </li>\r\n      </ul>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SingleProductInfo;\r\n","import React, { useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { StarOutlined } from \"@ant-design/icons\";\r\nimport { Modal } from \"antd\";\r\n\r\nfunction RatingModal({ children }) {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleModal = () => {\r\n    if (user && user.token) {\r\n      setModalVisible(true);\r\n    } else {\r\n      navigate(\"/login\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div onClick={handleModal}>\r\n        <StarOutlined className=\"text-danger\" />\r\n        <br />\r\n        {user ? \"Leave rating\" : \"Login to leave rating\"}\r\n      </div>\r\n\r\n      <Modal\r\n        title=\"Leave your Rating\"\r\n        visible={modalVisible}\r\n        centered\r\n        onOk={() => {\r\n          setModalVisible(false);\r\n          toast.success(\"Thank you for your review.\");\r\n        }}\r\n        onCancel={() => setModalVisible(false)}\r\n      >\r\n        {children}\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default RatingModal;\r\n","import React , { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport SingleProductInfo from \"./SingleProductInfo\";\r\nimport laptop from \"../../images/laptop.jpg\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"; // requires a loader\r\nimport { Carousel } from \"react-responsive-carousel\";\r\nimport { HeartOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport { Card, Tabs, Tooltip } from \"antd\";\r\nimport StarRating from \"react-star-ratings\";\r\nimport RatingModal from \"../modal/RatingModal\";\r\nimport { showAverage } from \"../../functions/ratings\";\r\nimport _ from \"lodash\";\r\nimport { addToWishlist } from \"../../functions/user\";\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nfunction SingleProduct({ product, onStarClick, star }) {\r\n  const { title, description, images, _id } = product;\r\n\r\n  const [tooltip, setTooltip] = useState(\"Click To Add\");\r\n  \r\n  let dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const handleAddToCart = () => {\r\n    //create cart array\r\n    let cart = [];\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      //if cart in localstorage get it\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n      //push new product to cart\r\n      cart.push({\r\n        ...product,\r\n        count: 1,\r\n      });\r\n\r\n      //remove duplicates\r\n      let unique = _.uniqWith(cart, _.isEqual);\r\n\r\n      //save to local storage\r\n      localStorage.setItem(\"cart\", JSON.stringify(unique));\r\n\r\n      setTooltip(\"Added\");\r\n\r\n      //add to redux\r\n      dispatch({\r\n        type: \"ADD_TO_CART\",\r\n        payload: unique,\r\n      });\r\n\r\n      //show item in cart drawer\r\n      dispatch({\r\n        type: \"SET_VISIBLE\",\r\n        payload: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleAddToWishlist = (e) => {\r\n    e.preventDefault();\r\n    addToWishlist(_id, user.token).then((res) => {\r\n      console.log(\"added to wishlist\", res.data);\r\n      toast.success(\"Item Added to Wishlist\");\r\n      navigate(\"/user/wishlist\");\r\n    } )\r\n\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"col-md-7 p-4\">\r\n        {images && images.length ? (\r\n          <Carousel autoPlay infiniteLoop showArrows>\r\n            {images && images.map((i) => <img src={i.url} key={i.public_id} alt=\"\" />)}\r\n          </Carousel>\r\n        ) : (\r\n          <Carousel autoPlay infiniteLoop showArrows>\r\n            <img src={laptop}  alt=\"\"  />\r\n          </Carousel>\r\n        )}\r\n\r\n        <Tabs type=\"card\">\r\n          <TabPane tab=\"Description\" key=\"1\" className=\"mb-3\">\r\n            {description && description}\r\n          </TabPane>\r\n          <TabPane tab=\"More\" key=\"2\">\r\n            Call us on XXXXX XXXXX to learn more about it.\r\n          </TabPane>\r\n        </Tabs>\r\n      </div>\r\n\r\n      <div className=\"col-md-5\">\r\n        <h1 className=\"bg-info p-3 h1\"> {title} </h1>\r\n\r\n        {product && product.ratings && product.ratings.length > 0 ? (\r\n          showAverage(product)\r\n        ) : (\r\n          <div className=\"text-center pb-3 \">\"No Ratings Yet!\"</div>\r\n        )}\r\n\r\n        <Card\r\n          actions={[\r\n            <a onClick={handleAddToWishlist} >\r\n              <HeartOutlined className=\"text-success\" />\r\n              <br />\r\n              { user && <p> Add to Wishlist</p> }\r\n              { !user && <p>Login for Add to Wishlist</p> }\r\n            </a>,\r\n\r\n            <Tooltip title={product.quantity > 1 && tooltip }>\r\n              <a onClick={handleAddToCart}  disabled={product.quantity < 1}>\r\n                <ShoppingCartOutlined className=\"text-danger\" />\r\n                <br />\r\n                {product.quantity < 1 ? \"Out Of Stock\" : \"Add to Cart\"}\r\n              </a>\r\n            </Tooltip>,\r\n\r\n            <RatingModal>\r\n              <StarRating\r\n                name={_id}\r\n                numberOfStars={5}\r\n                rating={star}\r\n                starRatedColor=\"red\"\r\n                changeRating={onStarClick}\r\n                isSelectable={true}\r\n              />\r\n            </RatingModal>,\r\n          ]}\r\n        >\r\n          <SingleProductInfo product={product} />\r\n        </Card>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SingleProduct;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n  productStar,\r\n  getProduct,\r\n  getRelatedProduct,\r\n} from \"../functions/product\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport SingleProduct from \"../components/cards/SingleProduct\";\r\nimport AllProductCard from \"../components/cards/AllProductCard\";\r\n\r\nfunction Product() {\r\n  const [product, setProduct] = useState([]);\r\n  const [star, setStar] = useState(0);\r\n  const [related, setRelated] = useState([]);\r\n\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const { slug } = useParams();\r\n\r\n  useEffect(() => {\r\n    loadSingleProduct();\r\n  }, [slug]);\r\n\r\n  useEffect(() => {\r\n    if (product.ratings && user) {\r\n      let existingRatingObject = product.ratings.find(\r\n        (ele) => ele.postedBy.toString() === user._id.toString()\r\n      );\r\n      existingRatingObject && setStar(existingRatingObject.star);\r\n    }\r\n  }, [product.ratings, user]);\r\n\r\n  const loadSingleProduct = () => {\r\n    getProduct(slug).then((res) => {\r\n      setProduct(res.data);\r\n      console.log(res.data);\r\n      getRelatedProduct(res.data._id).then((res) => setRelated(res.data));\r\n    });\r\n  };\r\n\r\n  const onStarClick = (newRating, name) => {\r\n    setStar(newRating);\r\n    // console.table(newRating, name);\r\n    productStar(name, newRating, user.token).then((res) => {\r\n      console.log(\"rating clicked\", res.data);\r\n      loadSingleProduct();\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid   pt-4 mt-5 relative\">\r\n      <div className=\"row pt-4\">\r\n        <SingleProduct\r\n          product={product}\r\n          onStarClick={onStarClick}\r\n          star={star}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <h3 className=\"col text-center pt-5 pb-5 h3\">\r\n          <hr class=\"bg-info border-2 border-top border-info \" />\r\n          Related Products\r\n          <hr class=\"bg-info border-2 border-top border-info\" />\r\n        </h3>\r\n      </div>\r\n      <div className=\"row pb-5\">\r\n        {related.length ? (\r\n          related.map((r) => (\r\n            <div key={r._id} className=\"col-md-4\">\r\n              <AllProductCard product={r} />\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <h3 className=\"col text-center\">No Products Found!</h3>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Product;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport laptop from \"../../images/laptop.jpg\";\r\nimport { showAverage } from \"../../functions/ratings\";\r\n\r\nimport { Card, Tooltip } from \"antd\";\r\nimport { EyeOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport _ from \"lodash\";\r\nconst { Meta } = Card;\r\n\r\nfunction AllProductCard({ product }) {\r\n  const [tooltip, setTooltip] = useState(\"Click To Add\");\r\n  const { title, description, images, slug, price } = product;\r\n\r\n  let dispatch = useDispatch();\r\n  // const { user, cart } = useSelector((state) => ({ ...state }));\r\n\r\n  const handleAddToCart = () => {\r\n    //create cart array\r\n    let cart = [];\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      //if cart in localstorage get it\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n      //push new product to cart\r\n      cart.push({\r\n        ...product,\r\n        count: 1,\r\n      });\r\n\r\n      //remove duplicates\r\n      let unique = _.uniqWith(cart, _.isEqual);\r\n\r\n      //save to local storage\r\n      localStorage.setItem(\"cart\", JSON.stringify(unique));\r\n\r\n      setTooltip(\"Added\");\r\n\r\n      //add to redux\r\n      dispatch({\r\n        type: \"ADD_TO_CART\",\r\n        payload: unique,\r\n      });\r\n\r\n      //show item in cart drawer\r\n      dispatch({\r\n        type: \"SET_VISIBLE\",\r\n        payload: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {product && product.ratings && product.ratings.length > 0 ? (\r\n        showAverage(product)\r\n      ) : (\r\n        <div className=\"text-center pb-3 \">\"No Ratings Yet!\"</div>\r\n      )}\r\n      <Card\r\n        hoverable\r\n        cover={\r\n          <img\r\n            alt=\"\"\r\n            src={images && images.length ? images[0].url : laptop}\r\n            style={{ height: \"150px\", objectFit: \"cover\" }}\r\n            className=\"p-2\"\r\n          />\r\n        }\r\n        actions={[\r\n          <Link to={`/product/${slug}`}>\r\n            <EyeOutlined className=\"text-success\" />\r\n            <br />\r\n            View Product\r\n          </Link>,\r\n\r\n          <Tooltip title={product.quantity > 1 && tooltip}>\r\n            <a onClick={handleAddToCart} disabled={product.quantity < 1} href=\"\" >\r\n              <ShoppingCartOutlined className=\"text-danger\" />\r\n              <br />\r\n              {product.quantity < 1 ? \"Out Of Stock\" : \"Add to Cart\"}\r\n            </a>\r\n          </Tooltip>,\r\n        ]}\r\n      >\r\n        <Meta\r\n          title={`${title} - $${price}`}\r\n          description={`${description && description.substring(0, 30)}...`}\r\n        />\r\n      </Card>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AllProductCard;\r\n","import React from \"react\";\r\nimport StarRating from \"react-star-ratings\";\r\n\r\nexport const showAverage = (p) => {\r\n  if (p && p.ratings) {\r\n    let ratingsArray = p.ratings;\r\n    let total = [];\r\n    let length = ratingsArray.length;\r\n    // console.log(\"length\", length);\r\n\r\n    ratingsArray.map((r) => total.push(r.star));\r\n    let totalReduced = total.reduce((p, n) => p + n, 0);\r\n    //console.log(\"total\", totalReduced);\r\n\r\n    let highest = length * 5;\r\n    //console.log(\"highest star\", highest);\r\n\r\n    let result = (totalReduced * 5) / highest;\r\n    //console.log(\"result\", result);\r\n\r\n    return (\r\n      <div className=\"text-center pb-3 \">\r\n        <span>\r\n          <StarRating\r\n            starDimension=\"20px\"\r\n            starSpacing=\"2px\"\r\n            rating={result}\r\n            starRatedColor=\"red\"\r\n            editing = {false}\r\n          />{\" \"}\r\n          ({length})\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n"],"sourceRoot":""}