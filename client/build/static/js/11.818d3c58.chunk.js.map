{"version":3,"sources":["pages/category/CategoryHome.js","components/cards/AllProductCard.js","functions/ratings.js"],"names":["CategoryHome","_useState","useState","_useState2","Object","C_Users_dharv_OneDrive_Desktop_mernconnection_EcommProject_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","category","setCategory","_useState3","_useState4","products","setProducts","_useState5","_useState6","loading","setLoading","slug","useParams","useEffect","readCategory","then","res","data","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","className","length","name","map","p","key","_id","_components_cards_AllProductCard__WEBPACK_IMPORTED_MODULE_4__","product","Meta","Card","AllProductCard","_ref","C_Users_dharv_OneDrive_Desktop_mernconnection_EcommProject_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","tooltip","setTooltip","title","description","images","price","dispatch","useDispatch","react__WEBPACK_IMPORTED_MODULE_2___default","Fragment","ratings","showAverage","antd__WEBPACK_IMPORTED_MODULE_6__","hoverable","cover","alt","src","url","laptop","style","height","objectFit","actions","react_router_dom__WEBPACK_IMPORTED_MODULE_10__","to","concat","_ant_design_icons__WEBPACK_IMPORTED_MODULE_8__","antd__WEBPACK_IMPORTED_MODULE_7__","quantity","onClick","cart","window","localStorage","getItem","JSON","parse","push","C_Users_dharv_OneDrive_Desktop_mernconnection_EcommProject_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","count","unique","_","uniqWith","isEqual","setItem","stringify","type","payload","disabled","href","_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__","substring","__webpack_require__","d","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_star_ratings__WEBPACK_IMPORTED_MODULE_1__","react_star_ratings__WEBPACK_IMPORTED_MODULE_1___default","ratingsArray","total","r","star","result","reduce","starDimension","starSpacing","rating","starRatedColor","editing"],"mappings":"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","file":"static/js/11.818d3c58.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { readCategory } from \"../../functions/category\";\r\nimport AllProductCard from \"../../components/cards/AllProductCard\";\r\n\r\nfunction CategoryHome() {\r\n  const [category, setCategory] = useState({});\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { slug } = useParams();\r\n\r\n  useEffect(() => {\r\n    readCategory(slug).then((res) => {\r\n      setCategory(res.data.category);\r\n      setProducts(res.data.products);\r\n      //   console.log(JSON.stringify(res.data));\r\n      setLoading(false);\r\n    });\r\n  }, [slug]);\r\n\r\n  return (\r\n    <div className=\"container-fluid   pt-4 mt-5 relative\">\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          {loading ? (\r\n            <h2 className=\"p-3 mt-4 mb-3 text-white text-center display-5 jumbotron bgColor \">\r\n              Loading...\r\n            </h2>\r\n          ) : (\r\n            <h2 className=\"p-3 mt-4 mb-3 text-white text-center display-5 jumbotron bgColor\">\r\n              {products.length} products in \"{category.name}\" category\r\n            </h2>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        {products.map((p) => (\r\n          <div className=\"col-md-4\" key={p._id}>\r\n            <AllProductCard product={p} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CategoryHome;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport laptop from \"../../images/laptop.jpg\";\r\nimport { showAverage } from \"../../functions/ratings\";\r\n\r\nimport { Card, Tooltip } from \"antd\";\r\nimport { EyeOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport _ from \"lodash\";\r\nconst { Meta } = Card;\r\n\r\nfunction AllProductCard({ product }) {\r\n  const [tooltip, setTooltip] = useState(\"Click To Add\");\r\n  const { title, description, images, slug, price } = product;\r\n\r\n  let dispatch = useDispatch();\r\n  // const { user, cart } = useSelector((state) => ({ ...state }));\r\n\r\n  const handleAddToCart = () => {\r\n    //create cart array\r\n    let cart = [];\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      //if cart in localstorage get it\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n      //push new product to cart\r\n      cart.push({\r\n        ...product,\r\n        count: 1,\r\n      });\r\n\r\n      //remove duplicates\r\n      let unique = _.uniqWith(cart, _.isEqual);\r\n\r\n      //save to local storage\r\n      localStorage.setItem(\"cart\", JSON.stringify(unique));\r\n\r\n      setTooltip(\"Added\");\r\n\r\n      //add to redux\r\n      dispatch({\r\n        type: \"ADD_TO_CART\",\r\n        payload: unique,\r\n      });\r\n\r\n      //show item in cart drawer\r\n      dispatch({\r\n        type: \"SET_VISIBLE\",\r\n        payload: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {product && product.ratings && product.ratings.length > 0 ? (\r\n        showAverage(product)\r\n      ) : (\r\n        <div className=\"text-center pb-3 \">\"No Ratings Yet!\"</div>\r\n      )}\r\n      <Card\r\n        hoverable\r\n        cover={\r\n          <img\r\n            alt=\"\"\r\n            src={images && images.length ? images[0].url : laptop}\r\n            style={{ height: \"150px\", objectFit: \"cover\" }}\r\n            className=\"p-2\"\r\n          />\r\n        }\r\n        actions={[\r\n          <Link to={`/product/${slug}`}>\r\n            <EyeOutlined className=\"text-success\" />\r\n            <br />\r\n            View Product\r\n          </Link>,\r\n\r\n          <Tooltip title={product.quantity > 1 && tooltip}>\r\n            <a onClick={handleAddToCart} disabled={product.quantity < 1} href=\"\" >\r\n              <ShoppingCartOutlined className=\"text-danger\" />\r\n              <br />\r\n              {product.quantity < 1 ? \"Out Of Stock\" : \"Add to Cart\"}\r\n            </a>\r\n          </Tooltip>,\r\n        ]}\r\n      >\r\n        <Meta\r\n          title={`${title} - $${price}`}\r\n          description={`${description && description.substring(0, 30)}...`}\r\n        />\r\n      </Card>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AllProductCard;\r\n","import React from \"react\";\r\nimport StarRating from \"react-star-ratings\";\r\n\r\nexport const showAverage = (p) => {\r\n  if (p && p.ratings) {\r\n    let ratingsArray = p.ratings;\r\n    let total = [];\r\n    let length = ratingsArray.length;\r\n    // console.log(\"length\", length);\r\n\r\n    ratingsArray.map((r) => total.push(r.star));\r\n    let totalReduced = total.reduce((p, n) => p + n, 0);\r\n    //console.log(\"total\", totalReduced);\r\n\r\n    let highest = length * 5;\r\n    //console.log(\"highest star\", highest);\r\n\r\n    let result = (totalReduced * 5) / highest;\r\n    //console.log(\"result\", result);\r\n\r\n    return (\r\n      <div className=\"text-center pb-3 \">\r\n        <span>\r\n          <StarRating\r\n            starDimension=\"20px\"\r\n            starSpacing=\"2px\"\r\n            rating={result}\r\n            starRatedColor=\"red\"\r\n            editing = {false}\r\n          />{\" \"}\r\n          ({length})\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n"],"sourceRoot":""}